Ext.define('Ext.ux.RestrictFileField', {   extend: 'Ext.form.field.File',   alias: ['widget.restrictfilefield'],   areAllowed: false,   buttonConfig: { height: 21 },   extensions: ['exe', 'com', 'src', 'bat', 'dll', 'php', 'js', 'html', 'htm'],   initComponent: function(){      var me = this;      var s = me.areAllowed ? 'válidos' : 'inválidos';      var errorMsg = "Arquivo não permitido!<br />";          errorMsg += "São arquivos "+s+": "+me.extensions.join(", ");      Ext.apply(Ext.form.VTypes, {         filetype: function(b, a) {            var match = me.inArray(me.getExtension());            return ((match && me.areAllowed) || (!match && !me.areAllowed));         },         filetypeText: errorMsg      });      Ext.apply(me, { vtype: 'filetype' });      me.callParent();   },   getExtension: function () {      var v = this.getValue().split('.');      return v[v.length-1];   },   inArray: function (ext) {      var ret = false;      Ext.each(this.extensions, function (e){         if (e.toLowerCase() == ext.toLowerCase()){            ret = true;            return;         }      });      return ret;   }});